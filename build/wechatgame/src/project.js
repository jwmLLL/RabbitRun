__require=function t(e,o,n){function r(a,c){if(!o[a]){if(!e[a]){var s=a.split("/");if(s=s[s.length-1],!e[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+a+"'")}}var u=o[a]={exports:{}};e[a][0].call(u.exports,function(t){return r(e[a][1][t]||t)},u,u.exports,t,e,o,n)}return o[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<n.length;a++)r(n[a]);return r}({BgView:[function(t,e,o){"use strict";cc._RF.push(e,"d4bf5l0dEBDKa8tkii1ilRk","BgView");t("UtilTool");var n=t("Config");cc.Class({extends:cc.Component,properties:{background1:{default:null,type:cc.Node},background2:{default:null,type:cc.Node},propPrefab:{default:[],type:cc.Prefab},propArr:[]},onLoad:function(){this.propLen=this.propPrefab.length,this.ranIndex=0,this.isStart=!0},start:function(){},initProp:function(){this.addProp(this.background1,0),this.addProp(this.background2,1)},startMove:function(t){var e=cc.moveBy(n.stepTime,cc.v2(-n.stepDis*t,0));this.background1.runAction(e),this.background2.runAction(e.clone())},addProp:function(t,e){t.removeAllChildren();for(var o=[],r=0;r<n.totalProp;r++){this.ranIndex=this.getRandom();var i=cc.instantiate(this.propPrefab[this.ranIndex]);i.setPosition(cc.v2(-n.screenWidth/2+n.propWidth*(r+.5),0)),t.addChild(i),i.name=""+this.ranIndex,o.push(i)}this.propArr[e]=o},getRandom:function(){for(var t=Math.ceil(10*Math.random())%this.propLen;!(2!=this.ranIndex&&3!=this.ranIndex||2!=t&&3!=t);)t=Math.ceil(10*Math.random())%this.propLen;return t},update:function(t){this.background1.x<=-n.screenWidth&&(this.addProp(this.background1,1),this.background1.x=this.background2.x+n.screenWidth),this.background2.x<=-n.screenWidth&&(this.addProp(this.background2,1),this.background2.x=this.background1.x+n.screenWidth)}}),cc._RF.pop()},{Config:"Config",UtilTool:"UtilTool"}],Config:[function(t,e,o){"use strict";cc._RF.push(e,"042c9x+FoFPgoJKSOUDTiV4","Config"),Object.defineProperty(o,"__esModule",{value:!0});var n={screenWidth:1280,screenHeight:720,stepDis:128,stepTime:.5,totalProp:10,propWidth:128,totalScore:0};o.default=n,e.exports=o.default,cc._RF.pop()},{}],GameControl:[function(t,e,o){"use strict";cc._RF.push(e,"7866agziABPg5N2pWyWDG4d","GameControl");var n=function(t){return t&&t.__esModule?t:{default:t}}(t("./util/UtilTool"));var r=t("PropEnum"),i=t("Config");cc.Class({extends:cc.Component,properties:{bgNode:{default:null,type:cc.Node},playerNode:{default:null,type:cc.Node},gameOver:{default:null,type:cc.Node}},start:function(){this.bgMove=this.bgNode.getComponent("BgView"),this.player=this.playerNode.getComponent("Player"),this.gameOver.active=!1},startUpdate:function(){i.totalScore=0,this.everyStep=0,this.schedule(this.updateCollision.bind(this),.4),this.bgMove.initProp()},btnClickEvent:function(t,e){switch(e){case"jump_1":this.bgMove.startMove(1),this.everyStep=1;break;case"jump_2":this.bgMove.startMove(2),this.everyStep=2}this.player.rabbitJump(1),i.totalScore+=this.everyStep},updateCollision:function(){for(var t=this.bgMove.propArr.length,e=this.bgMove.propArr[0].length,o=0;o<t;o++)for(var n=0;n<e;n++){var r=this.bgMove.propArr[o][n];this.player.rabbit.getBoundingBoxToWorld().intersects(r.getBoundingBoxToWorld())&&this.judgeCollision(r)}},judgeCollision:function(t){var e=parseInt(t.name);switch(n.default.log("PropEnum.stone  "+r.stone),e){case r.stone:case r.wood:break;case r.rottenWood:n.default.log("\u78b0\u5230\u673d\u6728"),this.gameResult();break;case r.null:n.default.log("\u78b0\u5230\u7a7a\u7684"),this.gameResult()}},gameResult:function(){this.unscheduleAllCallbacks(),i.totalScore-=this.everyStep,this.gameOver.getComponent("GameOver").label_score.string=""+i.totalScore,this.gameOver.active=!0}}),cc._RF.pop()},{"./util/UtilTool":"UtilTool",Config:"Config",PropEnum:"PropEnum"}],GameOver:[function(t,e,o){"use strict";cc._RF.push(e,"213e4Vn63lCGpmuUBE9Ipt6","GameOver");t("Config");cc.Class({extends:cc.Component,properties:{label_score:{default:null,type:cc.Label},gameNode:{default:null,type:cc.Node}},start:function(){},btnClickEvent:function(t,e){this.node.active=!1,this.gameNode.getComponent("GameControl").startUpdate()}}),cc._RF.pop()},{Config:"Config"}],Player:[function(t,e,o){"use strict";cc._RF.push(e,"1001diCPblOM7rdc3hPXHep","Player"),cc.Class({extends:cc.Component,properties:{rabbit:{default:null,type:cc.Node}},start:function(){this.anim=this.rabbit.getComponent(cc.Animation)},rabbitJump:function(t){this.anim.play("RabbitJumpAni")}}),cc._RF.pop()},{}],PropEnum:[function(t,e,o){"use strict";cc._RF.push(e,"626b2YVaqVKrreoWb6eW7Fu","PropEnum"),Object.defineProperty(o,"__esModule",{value:!0});var n={stone:0,wood:1,rottenWood:2,null:3};o.default=n,e.exports=o.default,cc._RF.pop()},{}],StartGame:[function(t,e,o){"use strict";cc._RF.push(e,"6d8d9+rjs9OwqQKhy3nU2eV","StartGame"),cc.Class({extends:cc.Component,properties:{gameNode:{default:null,type:cc.Node}},start:function(){},startGame:function(t,e){this.node.active=!1,this.gameNode.getComponent("GameControl").startUpdate()}}),cc._RF.pop()},{}],UtilTool:[function(t,e,o){"use strict";cc._RF.push(e,"2363boj6NRGhKCnDxq76p4C","UtilTool"),Object.defineProperty(o,"__esModule",{value:!0});var n={isPrint:!0,log:function(t){n.isPrint&&console.log(" rabbitRun  "+t)}};o.default=n,e.exports=o.default,cc._RF.pop()},{}]},{},["GameControl","Config","UtilTool","BgView","GameOver","Player","StartGame","PropEnum"]);