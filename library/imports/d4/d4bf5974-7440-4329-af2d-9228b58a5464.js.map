{"version":3,"sources":["../../../../../assets/scripts/view/assets/scripts/view/BgView.js"],"names":["UtilTool","require","Config","cc","Class","extends","Component","properties","background1","default","type","Node","background2","propPrefab","Prefab","start","propLen","length","addProp","startMove","step","log","moveBy","stepTime","v2","stepDis","runAction","clone","parent","removeAllChildren","i","totalProp","ranIndex","Math","ceil","random","prop","instantiate","setPosition","screenWidth","propWidth","addChild","update","dt","x"],"mappings":";;;;;;AAAA,IAAMA,WAAWC,QAAQ,UAAR,CAAjB;AACA,IAAMC,SAASD,QAAQ,QAAR,CAAf;;AAEAE,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,qBAAa;AACTC,qBAAS,IADA;AAETC,kBAAMP,GAAGQ;AAFA,SADL;AAKRC,qBAAa;AACTH,qBAAS,IADA;AAETC,kBAAMP,GAAGQ;AAFA,SALL;AASRE,oBAAW;AACPJ,qBAAQ,EADD;AAEPC,kBAAKP,GAAGW;AAFD;;AATH,KAHP;;AAoBLC,SApBK,mBAoBG;AACJ,aAAKC,OAAL,GAAe,KAAKH,UAAL,CAAgBI,MAA/B;;AAEA,aAAKC,OAAL,CAAa,KAAKV,WAAlB;AACA,aAAKU,OAAL,CAAa,KAAKN,WAAlB;AACH,KAzBI;;;AA2BL;AACAO,aA5BK,qBA4BKC,IA5BL,EA4BW;AACZpB,iBAASqB,GAAT,CAAaD,IAAb;;AAEA,YAAIE,SAASnB,GAAGmB,MAAH,CAAUpB,OAAOqB,QAAjB,EAA2BpB,GAAGqB,EAAH,CAAM,CAACtB,OAAOuB,OAAR,GAAkBL,IAAxB,EAA8B,CAA9B,CAA3B,CAAb;AACA,aAAKZ,WAAL,CAAiBkB,SAAjB,CAA2BJ,MAA3B;AACA,aAAKV,WAAL,CAAiBc,SAAjB,CAA2BJ,OAAOK,KAAP,EAA3B;AAIH,KArCI;;;AAuCL;AACAT,WAxCK,mBAwCGU,MAxCH,EAwCU;;AAEXA,eAAOC,iBAAP;AACA,aAAI,IAAIC,IAAG,CAAX,EAAcA,IAAG5B,OAAO6B,SAAxB,EAAkCD,GAAlC,EAAsC;AAClC,gBAAIE,WAAWC,KAAKC,IAAL,CAAUD,KAAKE,MAAL,KAAc,EAAxB,IAA4B,KAAKnB,OAAhD;AACA,gBAAIoB,OAAOjC,GAAGkC,WAAH,CAAe,KAAKxB,UAAL,CAAgBmB,QAAhB,CAAf,CAAX;AACAI,iBAAKE,WAAL,CAAiBnC,GAAGqB,EAAH,CAAM,CAACtB,OAAOqC,WAAR,GAAoB,CAApB,GAAuBrC,OAAOsC,SAAP,IAAkBV,IAAE,GAApB,CAA7B,EAAsD,CAAtD,CAAjB;AACAF,mBAAOa,QAAP,CAAgBL,IAAhB;AACH;AAEJ,KAlDI;AAoDLM,UApDK,kBAoDEC,EApDF,EAoDM;;AAEP,YAAI,KAAKnC,WAAL,CAAiBoC,CAAjB,IAAsB,CAAC1C,OAAOqC,WAAlC,EAA+C;AAC3C,iBAAKrB,OAAL,CAAa,KAAKV,WAAlB;AACA;AACAR,qBAASqB,GAAT,CAAa,KAAKb,WAAL,CAAiBoC,CAA9B;AACA,iBAAKpC,WAAL,CAAiBoC,CAAjB,GAAqB,KAAKhC,WAAL,CAAiBgC,CAAjB,GAAqB1C,OAAOqC,WAAjD;AACH;AACD,YAAI,KAAK3B,WAAL,CAAiBgC,CAAjB,IAAsB,CAAC1C,OAAOqC,WAAlC,EAA+C;AAC3C,iBAAKrB,OAAL,CAAa,KAAKN,WAAlB;AACA,iBAAKA,WAAL,CAAiBgC,CAAjB,GAAqB,KAAKpC,WAAL,CAAiBoC,CAAjB,GAAqB1C,OAAOqC,WAAjD;AACAvC,qBAASqB,GAAT,CAAa,0BAAwB,KAAKT,WAAL,CAAiBgC,CAAtD;AACH;AACJ;AAjEI,CAAT","file":"BgView.js","sourceRoot":"../../../../../assets/scripts/view","sourcesContent":["const UtilTool = require(\"UtilTool\");\nconst Config = require(\"Config\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        background1: {\n            default: null,\n            type: cc.Node\n        },\n        background2: {\n            default: null,\n            type: cc.Node\n        },\n        propPrefab:{\n            default:[],\n            type:cc.Prefab\n        }\n\n    },\n\n\n    start() {\n        this.propLen = this.propPrefab.length;\n\n        this.addProp(this.background1);\n        this.addProp(this.background2);\n    },\n\n    //开始移动背景  step  移动的步数\n    startMove(step) {\n        UtilTool.log(step);\n\n        let moveBy = cc.moveBy(Config.stepTime, cc.v2(-Config.stepDis * step, 0));\n        this.background1.runAction(moveBy);\n        this.background2.runAction(moveBy.clone());\n\n\n\n    },\n\n    //新增道具\n    addProp(parent){\n\n        parent.removeAllChildren();\n        for(let i= 0; i< Config.totalProp;i++){\n            let ranIndex = Math.ceil(Math.random()*10)%this.propLen;\n            let prop = cc.instantiate(this.propPrefab[ranIndex]);\n            prop.setPosition(cc.v2(-Config.screenWidth/2 +Config.propWidth*(i+0.5),0))\n            parent.addChild(prop);\n        }\n\n    },\n\n    update(dt) {\n\n        if (this.background1.x <= -Config.screenWidth) {\n            this.addProp(this.background1);\n            // this.background1.x = 0;\n            UtilTool.log(this.background1.x);\n            this.background1.x = this.background2.x + Config.screenWidth;\n        }\n        if (this.background2.x <= -Config.screenWidth) {\n            this.addProp(this.background2);\n            this.background2.x = this.background1.x + Config.screenWidth;\n            UtilTool.log(\"this.background2.x = \"+this.background2.x);\n        }\n    },\n});\n"]}