{"version":3,"sources":["GameControl.js"],"names":["PropEnum","require","cc","Class","extends","Component","properties","bgNode","default","type","Node","playerNode","start","bgMove","getComponent","player","UtilTool","log","rabbit","getBoundingBoxToWorld","propArr","btnClickEvent","event","customData","console","startMove","rabbitJump","update","dt","len1","length","len2","i","j","item","intersects","judgeCollision","tag","parseInt","name","stone","wood","rottenWood","null"],"mappings":";;;;;;AAAA;;;;;;AACA,IAAMA,WAAWC,QAAQ,UAAR,CAAjB;;AAEAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,gBAAQ;AACJC,qBAAS,IADL;AAEJC,kBAAMP,GAAGQ;AAFL,SADA;AAKRC,oBAAY;AACRH,qBAAS,IADD;AAERC,kBAAMP,GAAGQ;AAFD;;AALJ,KAHP;;AAeLE,SAfK,mBAeG;AACJ,aAAKC,MAAL,GAAc,KAAKN,MAAL,CAAYO,YAAZ,CAAyB,QAAzB,CAAd;AACA,aAAKC,MAAL,GAAc,KAAKJ,UAAL,CAAgBG,YAAhB,CAA6B,QAA7B,CAAd;;AAEAE,2BAASC,GAAT,CAAa,kDAAkD,KAAKF,MAAL,CAAYG,MAAZ,CAAmBC,qBAAnB,EAA/D;AACAH,2BAASC,GAAT,CAAa,iCAAiC,KAAKJ,MAAL,CAAYO,OAAZ,CAAoB,CAApB,EAAuB,CAAvB,EAA0BD,qBAA1B,EAA9C;AAEH,KAtBI;;;AAwBLE,mBAAe,uBAAUC,KAAV,EAAiBC,UAAjB,EAA6B;AACxCC,gBAAQP,GAAR,CAAY,+BAA+BM,UAA3C;AACA,gBAAQA,UAAR;AACI,iBAAK,QAAL;AACI,qBAAKV,MAAL,CAAYY,SAAZ,CAAsB,CAAtB;AACA;AACJ,iBAAK,QAAL;AACI,qBAAKZ,MAAL,CAAYY,SAAZ,CAAsB,CAAtB;AACA;AANR;;AASA,aAAKV,MAAL,CAAYW,UAAZ,CAAuB,CAAvB;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,KA7CI;;AA+CLC,UA/CK,kBA+CEC,EA/CF,EA+CM;AACP,YAAIC,OAAO,KAAKhB,MAAL,CAAYO,OAAZ,CAAoBU,MAA/B;AACA,YAAIC,OAAO,KAAKlB,MAAL,CAAYO,OAAZ,CAAoB,CAApB,EAAuBU,MAAlC;;AAEA,aAAK,IAAIE,IAAI,CAAb,EAAgBA,IAAIH,IAApB,EAA0BG,GAA1B,EAA+B;AAC3B,iBAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIF,IAApB,EAA0BE,GAA1B,EAA+B;AAC3B,oBAAIC,OAAO,KAAKrB,MAAL,CAAYO,OAAZ,CAAoBY,CAApB,EAAuBC,CAAvB,CAAX;AACA,oBAAI,KAAKlB,MAAL,CAAYG,MAAZ,CAAmBC,qBAAnB,GAA2CgB,UAA3C,CAAsDD,KAAKf,qBAAL,EAAtD,CAAJ,EAAyF;AACrF;AACA,yBAAKiB,cAAL,CAAoBF,IAApB;AACH;AACJ;AACJ;AACJ,KA5DI;AA8DLE,kBA9DK,0BA8DUF,IA9DV,EA8DgB;AACjB,YAAIG,MAAMC,SAASJ,KAAKK,IAAd,CAAV;AACAvB,2BAASC,GAAT,CAAa,qBAAmBjB,SAASwC,KAAzC;AACA,gBAAQH,GAAR;AACI,iBAAKrC,SAASwC,KAAd;;AAEI;AACJ,iBAAKxC,SAASyC,IAAd;;AAEI;AACJ,iBAAKzC,SAAS0C,UAAd;AACI1B,mCAASC,GAAT,CAAa,MAAb;AACA;AACA;AACJ,iBAAKjB,SAAS2C,IAAd;AACI3B,mCAASC,GAAT,CAAa,MAAb;AACA;AACA;;AAdR;AAkBH;AAnFI,CAAT","file":"GameControl.js","sourceRoot":"../../../../assets/scripts","sourcesContent":["import UtilTool from \"./util/UtilTool\";\nconst PropEnum = require(\"PropEnum\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        bgNode: {\n            default: null,\n            type: cc.Node\n        },\n        playerNode: {\n            default: null,\n            type: cc.Node\n        },\n\n    },\n\n    start() {\n        this.bgMove = this.bgNode.getComponent(\"BgView\");\n        this.player = this.playerNode.getComponent(\"Player\");\n\n        UtilTool.log(\"this.player.rabbit.getBoundingBoxToWorld()   \" + this.player.rabbit.getBoundingBoxToWorld());\n        UtilTool.log(\"this.bgMove.propArr[i][j]   \" + this.bgMove.propArr[0][4].getBoundingBoxToWorld());\n\n    },\n\n    btnClickEvent: function (event, customData) {\n        console.log(\" GameControl customData : \" + customData);\n        switch (customData) {\n            case 'jump_1':\n                this.bgMove.startMove(1);\n                break;\n            case 'jump_2':\n                this.bgMove.startMove(2);\n                break;\n        }\n\n        this.player.rabbitJump(1);\n\n\n        // return new Promise(function (resolve,reject) {\n        //     if (true){\n        //         resolve(value);\n        //     }else {\n        //         reject(value);\n        //     }\n        // })\n    },\n\n    update(dt) {\n        let len1 = this.bgMove.propArr.length;\n        let len2 = this.bgMove.propArr[0].length;\n\n        for (let i = 0; i < len1; i++) {\n            for (let j = 0; j < len2; j++) {\n                let item = this.bgMove.propArr[i][j];\n                if (this.player.rabbit.getBoundingBoxToWorld().intersects(item.getBoundingBoxToWorld())) {\n                    // UtilTool.log(\" item 22222   tag  : \" + item.name);\n                    this.judgeCollision(item);\n                }\n            }\n        }\n    },\n\n    judgeCollision(item) {\n        let tag = parseInt(item.name);\n        UtilTool.log(\"PropEnum.stone  \"+PropEnum.stone)\n        switch (tag) {\n            case PropEnum.stone:\n\n                break;\n            case PropEnum.wood:\n\n                break;\n            case PropEnum.rottenWood:\n                UtilTool.log(\"碰到朽木\" );\n                // this.unscheduleUpdate(this);\n                break;\n            case PropEnum.null:\n                UtilTool.log(\"碰到空的\" );\n                // this.unscheduleUpdate(this);\n                break;\n\n\n        }\n    }\n});\n"]}